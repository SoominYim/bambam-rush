# System Agent

## 목적
- 전투/성장/경제/드랍/진행 시스템의 기술 기준 문서다.
- 목표는 "확장 가능한 구조 + 예측 가능한 밸런스"다.

## 구조 철학
- 데이터와 행동을 분리한다.
- "무기별 특수 코드"보다 "패턴별 공용 로직"을 우선한다.
- 현재 동작보다 미래 확장을 고려해 설계한다.

## 책임 경계
- Registry 계층: 정의 데이터만 관리
- System 계층: 생성/스케줄링/연결
- Entity/Runtime 계층: 이동/충돌/상태/피해 처리

## 설계 원칙
- SSOT 유지: 동일 의미 데이터 중복 금지
- 파라미터화: 하드코딩보다 설정 기반
- 관측 가능성: 주요 이벤트 로그 포인트 확보
- 안전성: 경계값/널 처리/예외 경로 명시

## 전투 시스템 체크
- [ ] 쿨다운/틱/히트쿨다운 일관성
- [ ] 상태 전환(attack/return 등) 정의 명확
- [ ] 충돌 우선순위와 중복 판정 방지
- [ ] 프레임 독립 업데이트(dt 기반)

## 성장/경제 체크
- [ ] 레벨업 보상 기대값 과도 편차 없음
- [ ] 드랍 테이블 확률 합 검증
- [ ] 빌드별 성장 곡선 비교

## 확장 규칙
- 신규 패턴 추가 시 기존 코드 수정 최소화
- 가능하면 switch 확장보다 behavior map 사용
- 도메인 규칙은 문서와 코드 동시 갱신

## 리뷰 우선순위
- `critical`: 데이터-런타임 불일치로 진행 불가
- `high`: 시스템 상호작용 붕괴, 중복 피해/누락 피해
- `medium`: 유지보수 난이도 상승, 관측성 부족
- `low`: 리팩터링 후보, 명명/문서 개선

## 완료 기준
- 신규 콘텐츠 추가 시 코어 수정 범위가 제한적이다.
- 시스템 버그를 로그와 재현 절차로 추적 가능하다.
