# 뱀뱀 러시 (BamBam Rush) - 게임 기획서

## 1. 게임 개요 및 핵심 판타지 (Core Fantasy)

### **핵심 컨셉**

"동적으로 확장되는 신체(Tail)를 기반으로 압도적인 화력을 구축하여 생존하는 스네이크 서바이벌."

**장르:** 웹 기반 뱀파이어 서바이버즈 라이크 (부탄 헬 / 호드 서바이벌)
**목표 경험:**

1.  **초반:** 약하고 도망만 다니는 단계 (생존 본능 자극)
2.  **중반:** 일당백, 화면을 쓸어버리는 쾌감 (성장 체감)
3.  **후반:** 신과 같은 힘, 압도적인 비주얼 이펙트 (폭발적 보상)
4.  **최후:** 시스템(제한 시간/보스)에 의한 필연적인 죽음 또는 승천 (깊은 여운)

### **게임 루프 (Game Loops)**

#### **인게임 루프 (Core Loop)**

`이동` → `자동 공격` → `적 처치` → `XP 획득` → `레벨업` → `무기/패시브 선택` → `생존` → `반복`

#### **메타 루프 (Meta Loop)**

`게임 플레이` → `목표 달성 (시간/킬/보스)` → `새로운 콘텐츠 해금 (무기/캐릭터/모드)` → `전략 확장` → `재도전`

---

## 2. 핵심 시스템 아키텍처 (Core Architecture)

### 2.1 스네이크 군집체 (Snake Collective)

플레이어 엔티티는 단일 좌표를 가진 충돌체가 아닌, 물리적 추종 로직으로 연결된 '선형 군집체'로 설계되었습니다.

- **Head Entity**: 입력 처리, 물리 충돌, 글로벌 스탯(체력, 자석, 이동 속도)의 중심점
- **Tail Segments**: 머리의 이동 궤적을 추종하는 물리 객체. 각 세그먼트는 고유한 무기 슬롯을 보유하며 History Buffer 기반으로 부드러운 이동 구현

### 2.2 가디언 시스템 (Guardian System)

무기가 각 신체 부위에 귀속되어 독립적인 AI를 수행하는 시스템입니다.

- **Ownership**: 모든 무기 객체는 `parentID`를 통해 특정 세그먼트에 링크
- **Dynamic Link**: 소유 세그먼트 이동 시 무기의 중심점도 실시간 동기화
- **Behavior Map**: 무기 데이터(Stats)와 행동 함수(Behavior)를 분리하여 확장성 확보

---

## 3. 무기 시스템 (재미의 핵심)

**설계 철학:** "무기가 곧 플레이 스타일을 정의한다." 원소는 주 속성이 아닌 보조 속성(Modifier)으로 작용합니다.

### **무기 아키타입 (Weapon Archetypes)**

무기는 **공격 패턴**과 **원소 태그**로 분류됩니다.

| ID      | 이름           | 패턴       | 원소     | 설명                                       |
| :------ | :------------- | :--------- | :------- | :----------------------------------------- |
| **W01** | 🗡️ 가디언 소드 | orbit      | SWORD    | 꼬리 주변을 수호하며 적을 추적해 찌르는 검 |
| **W02** | 매직 미사일    | projectile | ARCANE   | 가장 가까운 적을 추적하는 미사일           |
| **W03** | 화염구         | line       | FIRE     | 전방으로 직선 발사되는 고화력 탄환         |
| **W04** | 체인 라이트닝  | chain      | ELECTRIC | 적들 사이를 튕기며 전이되는 번개           |
| **W05** | 맹독 웅덩이    | area       | POISON   | 바닥에 지속 피해를 주는 독 장판 생성       |
| **W06** | 부메랑         | return     | WIND     | 던지면 돌아오며 두 번 타격                 |
| **W07** | 서리 폭발      | nova       | ICE      | 플레이어 주변 폭발, 적 빙결                |
| **W08** | 수호의 구슬    | orbit      | LIGHT    | 투사체를 막고 적에게 피해를 줌             |
| **W09** | 바늘 지뢰      | trap       | PHYSICAL | 밟으면 폭발하는 지뢰 설치                  |
| **W10** | 레이저 빔      | beam       | TECH     | 관통하는 지속 레이저 발사                  |
| **W11** | 박쥐 소환      | minion     | BLOOD    | 적을 공격하는 박쥐 소환                    |
| **W12** | 도끼 투척      | arc        | PHYSICAL | 높은 곡사로 던져 범위 피해                 |
| **W13** | 블랙홀         | vortex     | GRAVITY  | 적들을 중심으로 끌어당김                   |
| **W14** | 차크람         | bounce     | WIND     | 벽과 화면 끝에서 튕기는 칼날               |
| **W15** | 화염 오라      | aura       | FIRE     | 플레이어 주변에 지속 화염 피해             |
| **W16** | 천둥 번개      | sky        | ELECTRIC | 하늘에서 랜덤하게 떨어지는 벼락            |
| **W17** | 샷건           | spread     | TECH     | 부채꼴 범위로 탄환 발사                    |
| **W18** | 천본앵         | orbit      | WIND     | 벚꽃잎이 회전 후 돌진/복귀하며 궤적 생성   |
| **W19** | 얼음 파편      | linear     | ICE      | 적을 느리게 하는 빠른 투사체               |
| **W20** | 메테오         | nuke       | FIRE     | 긴 딜레이 후 화면 전체 초토화              |

---

### **무기 진화 시스템 (Weapon Evolution)**

무기는 다음 조건을 만족하면 **전설 형태(Legendary Form)**로 진화합니다.

1.  무기 레벨 **8 (Max)** 달성.
2.  해당 무기의 **시너지 패시브** 보유.
3.  정예/보스 몬스터가 드랍하는 **상자** 획득.

| 기본 무기      | 필요 패시브       | 진화 무기          | 진화 효과                          |
| :------------- | :---------------- | :----------------- | :--------------------------------- |
| 🗡️ 가디언 소드 | P01 (힘)          | ⚔️ 엑스칼리버      | 공격력 및 범위 대폭 증가           |
| 매직 미사일    | P13 (복제)        | 🎆 비전 탄막       | 탄수 2배, 적중 시 폭발             |
| 화염구         | P01 (힘)          | ☄️ 헬파이어        | 모든 적 관통, 화염 지대 생성       |
| 체인 라이트닝  | P02 (쿨타임)      | ⚡ 폭풍 네트워크   | 무제한 전이, 감전 상태 부여        |
| 맹독 웅덩이    | P06 (범위)        | ☠️ 베놈 스웜프     | 화면 절반 덮는 영구 독지대         |
| 부메랑         | P05 (투사체 속도) | 🌀 스톰 룰러       | 공중 체류 시간 증가, 허리케인 생성 |
| 서리 폭발      | P03 (범위)        | ❄️ 절대 영도       | 주기적 화면 전체 빙결              |
| 레이저 빔      | P07 (관통)        | 🔦 데스 레이       | 자동 회전, 모든 것을 녹임          |
| 박쥐 소환      | P04 (회복력)      | 🧛 뱀파이어 로드   | 적 처치 시 플레이어 체력 회복      |
| 블랙홀         | P09 (자석)        | ⚫ 이벤트 호라이즌 | 흡인 범위 내 일반 몬스터 즉사      |

_(더 많은 조합 추가 예정)_

---

## 4. 패시브 시스템 (빌드의 뼈대)

패시브는 캐릭터의 스탯 스케일링을 결정합니다.

| 아이콘 | 이름                  | 효과                  | 최대 Lv | 시너지 무기 예시       |
| :----- | :-------------------- | :-------------------- | :------ | :--------------------- |
| 💪     | **힘 (Might)**        | 공격력 +10%           | 5       | 화염구, 도끼           |
| 🛡️     | **갑옷 (Armor)**      | 받는 피해 -1          | 5       | 수호의 구슬            |
| ❤️     | **최대 체력**         | 체력 +20%             | 5       | 화염 오라              |
| 🩹     | **회복력**            | 초당 체력 회복 x2     | 5       | 박쥐 소환              |
| ⏳     | **쿨타임**            | 쿨타임 -5%            | 5       | 체인 라이트닝          |
| 📐     | **범위**              | 공격 범위 +10%        | 5       | 맹독 웅덩이, 서리 폭발 |
| ⚡     | **투사체 속도**       | 투사체 속도 +10%      | 5       | 부메랑                 |
| 🏃     | **이동 속도**         | 이동 속도 +10%        | 5       | (신발 아이템)          |
| 🧲     | **자석**              | 아이템 획득 범위 +30% | 5       | 블랙홀                 |
| 🍀     | **행운**              | 치명타 확률 +5%       | 5       | (상자 확률 증가)       |
| 📈     | **성장**              | 경험치 획득량 +10%    | 5       | (빠른 레벨업 메타)     |
| 👑     | **탐욕**              | 골드 획득량 +10%      | 5       | (골드 파밍 메타)       |
| 👯     | **복제 (Duplicator)** | 투사체 수 +1          | 3       | 매직 미사일            |

---

## 5. 해금 시스템 (리텐션의 핵심)

모든 콘텐츠는 기본적으로 잠겨 있으며, 업적을 통해 해금됩니다. 메인 메뉴는 단순한 시작 버튼이 아닌 **트로피 진열장** 역할을 합니다.

### **무기 해금**

- **체인 라이트닝:** 10분 생존하기.
- **블랙홀:** 첫 번째 보스 처치.
- **레이저 빔:** 서로 다른 5개 무기 진화시키기.
- **메테오:** 한 번의 공격으로 10,000 데미지 입히기.
- **부메랑:** 체력 100% 상태로 2분간 유지하기.

### **캐릭터 해금**

- **스피드스터 (이속 특화):** 15분 생존 성공.
- **탱커 (체력 특화):** 한 게임에서 누적 1000 데미지 받기.
- **엘리멘탈리스트 (마법 특화):** 한 게임에서 화염, 얼음, 전기 무기 모두 진화.
- **갬블러 (행운 특화):** 누적 5000 골드 획득.

### **모드 및 기능 해금**

- **진화 시스템:** 레벨 10 보스 처치 시 해금.
- **리롤 (새로고침) 기능:** 플레이어 레벨 20 달성.
- **하드 모드:** 30분 생존 (게임 클리어) 1회 달성.
- **무한 모드:** 모든 기본 무기 수집 완료.

---

## 6. 개편된 원소 시스템 (태그 방식)

**기존의 "시작 시 원소 선택" 제한을 삭제합니다.**
대신, 원소는 무기의 **태그(Tag)** 로 작동하며 시너지 효과를 냅니다.

**시너지 예시:**

- **방화광 (Pyromaniac):** "[화염] 무기 3개 보유 시 → 모든 공격이 화상(Burn) 효과 적용 & 화상 데미지 전이."
- **전도체 (Conductor):** "[전기] 무기 3개 보유 시 → 쿨타임 20% 감소."
- **혹한의 심장 (Frozen Heart):** "[얼음] 무기 3개 보유 시 → 빙결된 적에게 주는 피해 +50%."

**시작 선택지 (유지):**
게임 시작 시 선택하는 원소 화면은 이제 **"시작 무기 & 아키타입 선택"** 으로 변경됩니다. (영구적인 제약 아님)

- **화염 선택:** [화염구] + [힘] 패시브를 가지고 시작.
- **물 선택:** [서리 폭발] + [범위] 패시브를 가지고 시작.
- **바람 선택:** [부메랑] + [투사체 속도] 패시브를 가지고 시작.

---

## 7. UI/UX 및 메인 메뉴 허브

### **메인 메뉴 구조**

메뉴는 버튼의 나열이 아닌, 플레이어의 성장을 보여주는 **시각적 허브**입니다.

```text
[ 상단: 현재 시즌 / 플레이어 레벨 / 보유 골드 ]

[ 중앙: 선택된 캐릭터 모델 (클릭 시 모션) ]

[ 왼쪽 패널 - 진척도 ]           [ 오른쪽 패널 - 준비 ]
  - 🏆 업적 (잠금 해제 현황)       - ⚔️ 무기 도감 (수집 현황)
  - 🧬 강화 (골드 상점)            - 👤 캐릭터 선택
  - 📜 도감 (몬스터 정보)          - 🗺️ 스테이지 선택

[ 하단: 게임 시작 (START) ]
```

### **핵심 UX 기능**

1.  **실루엣 처리:** 잠긴 아이템/캐릭터는 검은 실루엣으로 보여주며, 클릭 시 "레벨 10 달성 시 해금"과 같은 힌트를 제공합니다.
2.  **NEW 배지:** 새로 해금된 아이템에는 눈에 띄는 배지를 달아 사용을 유도합니다.
3.  **기록실:** 지난 게임의 빌드와 DPS 미터기를 보여주어 분석을 돕습니다.

---

## 8. 기술 최적화 및 구현

### 8.1 공간 분할 (Spatial Grid)

수백 개의 적 엔티티와 무기 객체 간의 충돌 판정을 위해 공간 분할 시스템을 구축하였습니다.

- 탐색 복잡도를 O(N)에서 O(1)에 가깝게 최적화
- 각 엔티티는 자신의 좌표에 따라 특정 셀에 등록되며, 무기는 주변 9개 셀에 속한 적들만 검사

### 8.2 Persistent State

가디언류 무기는 파괴와 생성을 반복하지 않고, 소유 엔티티와 함께 유지되도록 설계되어 GC 부하를 최소화하였습니다.

---

## 9. 기술 구현 로드맵

### **1단계: 기초 (Foundation) - 현재 진행 중**

- [x] 게임 루프 (타이머, 웨이브 시스템)
- [x] 기본 HUD 및 조이스틱
- [ ] **무기 패턴 시스템** (`Projectile` 클래스를 범용 `Weapon` 클래스로 리팩토링).

### **2단계: 콘텐츠 확장 (Content Expansion)**

- [ ] 18개 이상의 기본 무기 구현.
- [ ] 10개 이상의 패시브 구현.
- [ ] 진화 로직 구현 (레벨업 시 `checkEvolution()` 체크).

### **3단계: 메타 프로그레션 (Meta Progression)**

- [ ] 저장 시스템 (Local Storage 연동).
- [ ] 해금 매니저 (업적 추적 및 보상 지급).
- [ ] 메인 메뉴 허브 UI 구현.

### **4단계: 폴리싱 (Polish)**

- [ ] 시각 효과 (VFX, 셰이더) 개선.
- [ ] 사운드 효과 (SFX) 추가.
- [ ] 모바일 최적화 (성능 튜닝).

---

_BamBam Rush 프로젝트를 위해 Antigravity가 작성함._
